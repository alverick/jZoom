/*!
 * jZoom.js
 *
 * Version 1.1.11
 *
 * https://github.com/pciapcib/jZoom
 *
 * MIT licensed
 *
 * Copyright (c) 2016 Shen Ting
 */
!function(t){"use strict";t.fn.jzoom=function(i){return this.each(function(){function e(i,e){var s=a.find("img").attr("src");i=i||"_big";var o=s.lastIndexOf(".");e=e||s.substring(o+1);var h=s.substring(0,o)+i+"."+e,n=t("<img>").attr("src",h).css("position","absolute");return n}function s(){a.append(r).append(g);var t=p.width()/a.width(),i=p.height()/a.height();r.css({width:g.width()/t+"px",height:g.height()/i+"px"}),c=a.width()-r.outerWidth(),l=a.height()-r.outerHeight(),m=(p.width()-g.width())/c,b=(p.height()-g.height())/l}function o(t,i,e,s){var o,h=t-i-e/2;return o=0>h||h>s?0>h?0:s:h}var h={width:400,height:400,position:"right",offsetX:20,offsetY:0,bgColor:"#fff",loading:"Loading..."};i=t.extend({},h,i);var a=t(this),n=a.css("position");"static"===n&&a.css("position","relative"),a.find("img").css({width:a.width()+"px",height:a.height()+"px"});var r=t("<div></div>").addClass("zoom-lens");r.css({backgroundColor:i.bgColor});var d,f,g=t("<div></div>").addClass("zoom-img");switch(i.position){case"top":d=0,f=-i.height-i.offsetY;break;case"right":d=a.width()+i.offsetX,f=0;break;case"bottom":d=0,f=a.height()+i.offsetY;break;case"left":d=-i.width-i.offsetX,f=0;break;case"over":d=0+i.offsetX,f=0+i.offsetY}g.css({left:d+"px",top:f+"px",width:i.width+"px",height:i.height+"px",lineHeight:i.height+"px"});var p=e(i.suffixName,i.imgType);g.append(p).append(i.loading);var c,l,u,v,m,b,w=a.offset();return a.mouseenter(function(){a.find(".zoom-lens").length<1&&s(),r.addClass("visible"),g.addClass("visible"),a.trigger("zoom.enter")}).mousemove(function(t){u=o(t.pageX,w.left,r.width(),c),v=o(t.pageY,w.top,r.height(),l),r.css({left:u+"px",top:v+"px"}),p.css({left:-u*m+"px",top:-v*b+"px"})}).mouseleave(function(){r.removeClass("visible"),g.removeClass("visible"),a.trigger("zoom.hide")}),this})}}(jQuery);