/*!
 * jZoom.js
 *
 * Version 1.1.6
 *
 * https://github.com/pciapcib/jZoom
 *
 * MIT licensed
 *
 * Copyright (c) 2016 Shen Ting
 */
!function(t){"use strict";t.fn.jzoom=function(i){return this.each(function(){function e(i,e){var s=a.find("img").attr("src");i=i||"_big";var o=s.lastIndexOf(".");e=e||s.substring(o+1);var h=s.substring(0,o)+i+"."+e,r=t("<img>").attr("src",h).css("position","absolute");return r}function s(){a.append(n).append(f);var t=p.width()/a.width(),i=p.height()/a.height();n.css({width:f.width()/t+"px",height:f.height()/i+"px"}),c=a.width()-n.outerWidth(),l=a.height()-n.outerHeight(),m=(p.width()-f.width())/c,w=(p.height()-f.height())/l}function o(t,i,e,s){var o,h=t-i-e/2;return o=0>h||h>s?0>h?0:s:h}var h={width:400,height:400,position:"right",offsetX:20,offsetY:0,bgColor:"#fff",loading:"Loading..."};i=t.extend({},h,i);var a=t(this),r=a.css("position");"static"===r&&a.css("position","relative"),a.find("img").css({width:a.width()+"px",height:a.height()+"px"});var n=t("<div></div>").addClass("zoom-lens");n.css({backgroundColor:i.bgColor});var d,g,f=t("<div></div>").addClass("zoom-img");switch(i.position){case"top":d=0,g=-i.height-i.offsetY;break;case"right":d=a.width()+i.offsetX,g=0;break;case"bottom":d=0,g=a.height()+i.offsetY;break;case"left":d=-i.width-i.offsetX,g=0}f.css({left:d+"px",top:g+"px",width:i.width+"px",height:i.height+"px",lineHeight:i.height+"px"});var p=e(i.suffixName,i.imgType);f.append(p).append(i.loading);var c,l,u,v,m,w,x=0,b=a.offset();return a.mouseenter(function(){n.addClass("visible"),f.addClass("visible"),a.trigger("zoom.enter"),0===x&&(s(),x++)}).mousemove(function(t){u=o(t.pageX,b.left,n.width(),c),v=o(t.pageY,b.top,n.height(),l),n.css({left:u+"px",top:v+"px"}),p.css({left:-u*m+"px",top:-v*w+"px"})}).mouseleave(function(){n.removeClass("visible"),f.removeClass("visible"),a.trigger("zoom.hide")}),this})}}(jQuery);